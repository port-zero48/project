# Withdrawal System - Visual Flow Guide

## ğŸ¯ Complete User & Admin Journey

### STEP 1: User Uploads Receipt
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Withdraw Funds                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  Progress: â‘  âœ â‘¡ âœ â‘¢                   â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ’š Your Balance                  â”‚   â”‚
â”‚  â”‚ $5,000.00                        â”‚   â”‚
â”‚  â”‚ Available balance                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Withdrawal Details               â”‚   â”‚
â”‚  â”‚                                  â”‚   â”‚
â”‚  â”‚ Withdrawal Fee: $10.00 ğŸ’›        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Send Payment To                  â”‚   â”‚
â”‚  â”‚ Bank Name: First National Bank   â”‚   â”‚
â”‚  â”‚ Acct Holder: Investment Admin    â”‚   â”‚
â”‚  â”‚ Acct Number: 1234567890          â”‚   â”‚
â”‚  â”‚ Routing: 021000021               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚  Amount to Withdraw (USD)               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ [    100                     ]   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                         â”‚
â”‚  [Continue to Upload Proof]             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### STEP 2: Upload Proof with Countdown
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Withdraw Funds                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  Progress: âœ“ â‘  âœ â‘¡ âœ â‘¢                 â”‚
â”‚                                         â”‚
â”‚  â„¹ï¸  Transfer $100.00 to the account    â”‚
â”‚  above and upload proof of payment      â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Upload Payment Proof             â”‚   â”‚
â”‚  â”‚ â±ï¸ 14:32 (countdown timer)        â”‚   â”‚
â”‚  â”‚                                  â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚  â”‚  â”‚  ğŸ“„ Drag & drop here     â”‚    â”‚   â”‚
â”‚  â”‚  â”‚  or click to upload      â”‚    â”‚   â”‚
â”‚  â”‚  â”‚                          â”‚    â”‚   â”‚
â”‚  â”‚  â”‚  PNG, JPG, PDF (max 10MB)â”‚    â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚  â”‚                                  â”‚   â”‚
â”‚  â”‚  âœ… receipt.pdf                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚  [Submit Proof & Complete Request]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### STEP 3: Success
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Withdraw Funds                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  Progress: âœ“ â‘  âœ“ â‘¡ âœ â‘¢                 â”‚
â”‚                                         â”‚
â”‚          âœ… (green checkmark)           â”‚
â”‚                                         â”‚
â”‚   Withdrawal Submitted!                 â”‚
â”‚   Your proof has been uploaded and      â”‚
â”‚   sent to admin for approval            â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Amount: $100.00                  â”‚   â”‚
â”‚  â”‚ Fee: $10.00                      â”‚   â”‚
â”‚  â”‚ You Will Receive: $90.00 (green) â”‚   â”‚
â”‚  â”‚                                  â”‚   â”‚
â”‚  â”‚ Status: â³ Awaiting Admin Approval â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚  Admin will review your proof and       â”‚
â”‚  approve the withdrawal. Check your     â”‚
â”‚  dashboard for updates.                 â”‚
â”‚                                         â”‚
â”‚  [Submit Another Withdrawal]            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸšï¸ Admin Withdrawal Settings Interface

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Admin Dashboard â†’ Settings                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Withdrawal Settings (NEW)               â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚                                        â”‚ â”‚
â”‚  â”‚ ğŸ’° Withdrawal Fee                      â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚ â”‚
â”‚  â”‚ â”‚ [  10.00  ]$ â”‚                       â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚ â”‚
â”‚  â”‚ This fee applies to all withdrawals    â”‚ â”‚
â”‚  â”‚                                        â”‚ â”‚
â”‚  â”‚ ğŸ¦ Bank Account Details                â”‚ â”‚
â”‚  â”‚                                        â”‚ â”‚
â”‚  â”‚ Bank Name                              â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â”‚ First National Bank                â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”‚                                        â”‚ â”‚
â”‚  â”‚ Account Holder                         â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â”‚ Investment Admin                   â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”‚                                        â”‚ â”‚
â”‚  â”‚ Account Number                         â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â”‚ 1234567890                         â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”‚                                        â”‚ â”‚
â”‚  â”‚ Routing Number (Optional)              â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â”‚ 021000021                          â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”‚                                        â”‚ â”‚
â”‚  â”‚ [ğŸ’¾ Save Changes]                      â”‚ â”‚
â”‚  â”‚                                        â”‚ â”‚
â”‚  â”‚ PREVIEW: What Users See                â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â”‚ Fee: $10.00 ğŸ’›                     â”‚ â”‚
â”‚  â”‚ â”‚ Bank: First National Bank          â”‚ â”‚
â”‚  â”‚ â”‚ Account: Investment Admin          â”‚ â”‚
â”‚  â”‚ â”‚ #: 1234567890                      â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Transaction Settings (existing)         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Withdrawal Method Settings (existing)   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    WITHDRAWAL FLOW                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

USER SIDE:
â•â•â•â•â•â•â•â•â•

STEP 1: Review
  â”œâ”€ WithdrawDeposit.tsx loads
  â”œâ”€ fetchAdminSettings() executes
  â””â”€ Supabase query: SELECT * FROM withdrawal_settings
     â†“
     Returns: {
       withdrawal_fee: 10,
       admin_bank_name: "First National Bank",
       admin_account_number: "1234567890",
       admin_account_holder: "Investment Admin",
       admin_routing_number: "021000021"
     }
  â”œâ”€ Display loaded data to user
  â””â”€ User enters amount & clicks Continue

STEP 2: Upload Proof
  â”œâ”€ Create withdrawal_requests row
  â”‚  INSERT: {
  â”‚    user_id: "user123",
  â”‚    amount: 100,
  â”‚    status: "pending",
  â”‚    method_type: "transfer",
  â”‚    withdrawal_fee: 10
  â”‚  }
  â”œâ”€ Start 15-minute countdown (900 seconds)
  â”œâ”€ User uploads proof file
  â””â”€ File stored: withdrawal-proofs/{withdrawal_id}/{timestamp}-filename

STEP 3: Success
  â”œâ”€ Update withdrawal_requests
  â”‚  UPDATE: {
  â”‚    status: "pending_approval",
  â”‚    proof_file_path: "path/to/file"
  â”‚  }
  â””â”€ Show success screen

ADMIN SIDE:
â•â•â•â•â•â•â•â•â•â•

Settings:
  â”œâ”€ Admin navigates to Settings tab
  â”œâ”€ Sees AdminWithdrawalSettings component
  â””â”€ Can update withdrawal_settings table:
     UPDATE withdrawal_settings SET
       withdrawal_fee = 10,
       admin_bank_name = "First National Bank",
       ...
     (Single row design - no WHERE clause)

Withdrawals:
  â”œâ”€ Admin navigates to Withdrawals tab
  â”œâ”€ Sees list of pending_approval requests
  â”œâ”€ Can download proof files from storage
  â””â”€ Can approve/reject:
     UPDATE withdrawal_requests SET status = "approved"

DATABASE:
â•â•â•â•â•â•â•â•â•

withdrawal_settings (NEW - single row)
  â”œâ”€ id
  â”œâ”€ withdrawal_fee â† Admin sets this
  â”œâ”€ admin_bank_name â† Admin sets this
  â”œâ”€ admin_account_holder â† Admin sets this
  â”œâ”€ admin_account_number â† Admin sets this
  â”œâ”€ admin_routing_number â† Admin sets this
  â””â”€ updated_at

withdrawal_requests (existing - one per request)
  â”œâ”€ id
  â”œâ”€ user_id
  â”œâ”€ amount
  â”œâ”€ withdrawal_fee â† Copied from settings when created
  â”œâ”€ status (pending â†’ pending_approval â†’ approved/rejected)
  â”œâ”€ proof_file_path â† Path in storage
  â”œâ”€ created_at
  â”œâ”€ updated_at
  â””â”€ approved_at

STORAGE:
â•â•â•â•â•â•â•â•

withdrawal-proofs/
  â””â”€ {withdrawal_id}/
     â””â”€ {timestamp}-{filename}
        (e.g., f47ac10b-58cc-4372-a567-0e02b2c3d479/1702000000000-receipt.pdf)
```

---

## â±ï¸ Countdown Timer Behavior

```
WHEN STEP 2 STARTS:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
timeRemaining = 900

EVERY 1 SECOND:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
900 â†’ 14:00
899 â†’ 13:59
898 â†’ 13:58
...
300 â†’ 05:00  (âš ï¸ WARNING COLOR STARTS)
...
60  â†’ 01:00
59  â†’ 00:59
...
1   â†’ 00:01
0   â†’ 00:00  (âš ï¸ TIME EXPIRED)

DISPLAY FORMAT:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
formatTime(seconds):
  mins = Math.floor(seconds / 60)
  secs = seconds % 60
  return `${mins}:${secs.toString().padStart(2, '0')}`
  
Examples:
  900 â†’ "15:00"
  535 â†’ "08:55"
  125 â†’ "02:05"
  5   â†’ "00:05"
```

---

## ğŸ”’ Security & Access Control

```
WITHDRAWAL_SETTINGS TABLE RLS:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

                   â”‚ Admin | User | Public |
                   â”‚(vit..)â”‚(auth)â”‚(none) â”‚
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤
SELECT (read)      â”‚  âœ…   â”‚  âœ…  â”‚   âŒ  â”‚
INSERT (create)    â”‚  âœ…   â”‚  âŒ  â”‚   âŒ  â”‚
UPDATE (edit)      â”‚  âœ…   â”‚  âŒ  â”‚   âŒ  â”‚
DELETE             â”‚  âŒ   â”‚  âŒ  â”‚   âŒ  â”‚
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜

Why users can read?
  â†’ Need to see fee and bank details

Why users cannot write?
  â†’ Prevents users from changing fee/details

WITHDRAWAL_REQUESTS TABLE RLS:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

                   â”‚ Admin â”‚ Own User â”‚ Other â”‚
                   â”‚       â”‚          â”‚ Users â”‚
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤
SELECT own rows    â”‚  âœ…   â”‚   âœ…     â”‚   âŒ  â”‚
SELECT all rows    â”‚  âœ…   â”‚   âŒ     â”‚   âŒ  â”‚
INSERT own         â”‚  âŒ   â”‚   âœ…     â”‚   âŒ  â”‚
UPDATE status      â”‚  âœ…   â”‚   âŒ     â”‚   âŒ  â”‚
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Component Architecture

```
Pages/
â”œâ”€ AdminDashboard.tsx
â”‚  â””â”€ imports AdminWithdrawalSettings
â”‚
Components/
â”œâ”€ admin/
â”‚  â”œâ”€ AdminWithdrawalSettings.tsx (NEW location)
â”‚  â”‚  â””â”€ Form to set fee & bank details
â”‚  â”‚     â””â”€ Updates withdrawal_settings table
â”‚  â”‚
â”‚  â””â”€ WithdrawalRequests.tsx
â”‚     â””â”€ Admin management of requests
â”‚        â””â”€ Approve/reject withdrawals
â”‚
â””â”€ dashboard/
   â””â”€ WithdrawDeposit.tsx (REDESIGNED)
      â”œâ”€ Step 1: Review (fetches admin settings)
      â”œâ”€ Step 2: Upload (15-min countdown)
      â””â”€ Step 3: Success
```

---

## ğŸ§® Calculation Example

```
USER ENTERS: $100

STEP 1:
  Admin has set: Withdrawal Fee = $10
  â†’ Display to user:
    Amount: $100
    Fee: $10

STEP 2:
  User uploads proof
  â†’ System creates withdrawal_requests with:
    amount: 100
    withdrawal_fee: 10

STEP 3:
  Display to user:
    Amount: $100.00
    Fee: $10.00
    You Will Receive: $90.00 â† (100 - 10)

DATABASE:
  User sees deduct from balance: $100
  Admin receives in bank account: $100
  (User already paid the $10 before withdrawal)
```

---

## ğŸš¦ Status Progression

```
User Withdrawal Request Status Flow:

pending
  â†“
  (User uploads proof)
  â†“
pending_approval
  â†“
  (Admin reviews and decides)
  â”œâ”€â†’ approved
  â”‚   â”œâ”€ Admin can notify user
  â”‚   â””â”€ Payment processed
  â”‚
  â””â”€â†’ rejected
      â””â”€ Admin provides reason
```

---

## âœ… Testing Checklist with Example Values

```
ADMIN SETUP:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Go to Settings                 â”‚
â”‚ âœ“ Fee field: 10 (numeric)      â”‚
â”‚ âœ“ Bank Name: FNB               â”‚
â”‚ âœ“ Account Holder: Admin User   â”‚
â”‚ âœ“ Account #: 1234567890        â”‚
â”‚ âœ“ Routing: 021000021           â”‚
â”‚ âœ“ Click Save                   â”‚
â”‚ âœ“ See success message          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

USER WITHDRAWAL:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 1 Verification:           â”‚
â”‚ âœ“ Shows balance: $5000         â”‚
â”‚ âœ“ Shows fee: $10.00            â”‚
â”‚ âœ“ Shows bank: FNB              â”‚
â”‚ âœ“ Shows account #: 1234567890  â”‚
â”‚ âœ“ Enter: 100                   â”‚
â”‚ âœ“ Click Continue               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 2 Verification:           â”‚
â”‚ âœ“ Timer shows: 15:00           â”‚
â”‚ âœ“ Timer counts down by 1s      â”‚
â”‚ âœ“ Can upload file              â”‚
â”‚ âœ“ Shows filename after upload  â”‚
â”‚ âœ“ Click Submit                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 3 Verification:           â”‚
â”‚ âœ“ Green checkmark shows        â”‚
â”‚ âœ“ Amount: $100.00              â”‚
â”‚ âœ“ Fee: $10.00                  â”‚
â”‚ âœ“ Receive: $90.00              â”‚
â”‚ âœ“ Status: Awaiting Approval    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ADMIN APPROVAL:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Go to Withdrawals tab          â”‚
â”‚ âœ“ See pending request          â”‚
â”‚ âœ“ Can download proof           â”‚
â”‚ âœ“ Can approve/reject           â”‚
â”‚ âœ“ Click Approve                â”‚
â”‚ âœ“ Status changes               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¨ UI Color Reference

```
COLORS USED:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Primary (Red):    #ef4444     â† Buttons, active steps
Success (Green):  #22c55e     â† Balance, checkmark, final amount
Warning (Yellow): #eab308     â† Fee indicator, low timer
Info (Blue):      #3b82f6     â† Info messages
Neutral (Gray):   #374151     â† Backgrounds, borders

TEXT COLORS:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Primary:    text-white        â† Main text
Secondary:  text-gray-400     â† Help text
Success:    text-green-400    â† Good info
Warning:    text-yellow-400   â† Important info
Error:      text-red-400      â† Error messages

BACKGROUNDS:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Card:       bg-gray-800       â† Main card backgrounds
Dark:       bg-gray-900       â† Page background
Input:      bg-gray-700       â† Input fields
Border:     border-gray-600   â† Borders
```
